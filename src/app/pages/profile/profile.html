<div class="profile-page">

  <div class="profile-wrapper">

    <!-- LEFT SIDE: AVATAR & IMAGE -->
    <div class="profile-left">

      <div class="avatar-big">
        <img *ngIf="profileImage" [src]="profileImage" alt="Avatar" />
        <span *ngIf="!profileImage">{{ user.fullname[0] }}</span>
      </div>

      <label *ngIf=editing class="upload-btn">
        Change Photo
        <input type="file" accept="image/*" (change)="uploadImage($event)" />
      </label>

    </div>

    <!-- RIGHT SIDE: INFORMATION -->
    <div class="profile-right">

      <h1 class="profile-title">Profile Information</h1>

      <div class="form-grid">

        <!-- FULL NAME -->
        <div class="form-item">
          <label>Full Name</label>
          <span *ngIf="!editing">{{ user.fullname }}</span>
          <input *ngIf="editing" [(ngModel)]="editedUser.fullname" />
        </div>

        <!-- EMAIL -->
        <div class="form-item">
          <label>Email</label>
          <span *ngIf="!editing">{{ user.email }}</span>
          <input *ngIf="editing" [(ngModel)]="editedUser.email" />
        </div>

        <!-- USERNAME -->
        <div class="form-item">
          <label>Username</label>
          <span *ngIf="!editing">{{ user.username }}</span>
          <input *ngIf="editing" [(ngModel)]="editedUser.username" />
        </div>

        <!-- UNIVERSITY ID -->
        <div class="form-item" *ngIf="user.universityId">
          <label>University ID</label>
          <span *ngIf="!editing">{{ user.universityId }}</span>
          <input *ngIf="editing" [(ngModel)]="editedUser.universityId" />
        </div>

        <!-- STAFF ID -->
        <div class="form-item" *ngIf="user.staffId">
          <label>Staff ID</label>
          <span *ngIf="!editing">{{ user.staffId }}</span>
          <input *ngIf="editing" [(ngModel)]="editedUser.staffId" />
        </div>

      </div>

      <!-- BUTTONS -->
      <div class="button-row" *ngIf="!editing">
        <button class="prim-btn" (click)="toggleEdit()">Edit Profile</button>
        <button class="danger-btn" (click)="logout()">Logout</button>
      </div>

      <div class="button-row" *ngIf="editing">
        <button class="prim-btn" (click)="saveChanges()">Save Changes</button>
        <button class="secondary-btn" (click)="cancelEdit()">Cancel</button>
            </div>
      <!-- CHANGE PASSWORD PANEL -->
      <div class="password-box">

        <h3>Change Password</h3>

        <div *ngIf="!changingPassword" class="password-preview">
          ••••••••••
        <button class="mini-btn" (click)="changingPassword = true">Change</button>
        </div>

        <div *ngIf="changingPassword" class="password-fields">
          <input
            type="password"
            placeholder="Current Password"
            [(ngModel)]="passwordForm.current"
          />
          <input
            type="password"
            placeholder="New Password"
            [(ngModel)]="passwordForm.new"
          />
          <input
            type="password"
            placeholder="Confirm New Password"
            [(ngModel)]="passwordForm.confirm"
          />

          <div class="password-actions">
            <button class="primary-btn" (click)="savePassword()">Save Password</button>
            <button class="secondary-btn" (click)="changingPassword = false">Cancel</button>
          </div>
        </div>

      </div>

    </div>

  </div>

  <!-- Background orbs -->
  <div class="orb orb1"></div>
  <div class="orb orb2"></div>
  <div class="orb orb3"></div>

</div>
